from bs4 import BeautifulSoup
from selenium import webdriver
import pandas as pd
import time

class MarketScraper:
    def __init__(self, driver_path="chromedriver"):
        self.driver = webdriver.Chrome(driver_path)

    def scrape_stock(self, ticker: str) -> pd.DataFrame:
        url = f"https://finance.yahoo.com/quote/{ticker}"
        self.driver.get(url)
        time.sleep(2)
        soup = BeautifulSoup(self.driver.page_source, "html.parser")
        price = soup.find("fin-streamer", {"data-field": "regularMarketPrice"}).text
        return pd.DataFrame([{"ticker": ticker, "price": float(price)}])
